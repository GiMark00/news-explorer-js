!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.element.querySelector(".popup__close").addEventListener("click",(function(){return r.close()})),this.openClass=n}var t,n,o;return t=e,(n=[{key:"open",value:function(){this.element.classList.add(this.openClass)}},{key:"close",value:function(){this.element.classList.remove(this.openClass)}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return i}));var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formV=t,this.setEventListeners=this.setEventListeners.bind(this)}var t,n,o;return t=e,(n=[{key:"checkInputValidity",value:function(e,t){return 0===e.value.length?(t.textContent="Это обязательное поле",!1):e.value.length<2||e.value.length>30?(t.textContent="Должно быть от 2 до 30 символов",!1):e.typeMismatch&&"email"===e.type?(t.textContent="Здесь должен быть email",!1):(t.textContent="",!0)}},{key:"setSubmitButtonState",value:function(e){var t=this.formV.querySelector("button");e?(t.removeAttribute("disabled",!0),t.classList.add("popup__button_active")):(t.setAttribute("disabled",!0),t.classList.remove("popup__button_active"))}},{key:"isFieldValid",value:function(e){var t=this.formV.querySelector("#".concat(e.id,"__valid"));return this.checkInputValidity(e,t)}},{key:"setEventListeners",value:function(){var e=this;r(this.formV.querySelectorAll("input")),this.formV.addEventListener("input",(function(t){var n=t.target;e.isFieldValid(n)}))}},{key:"setEventListenersRegistration",value:function(){var e=document.forms.registration,t=e.elements.signup__name,n=e.elements.signup__email,r=e.elements.signup__password,o=document.querySelector("#registration_button");0===n.value.length||0===t.value.length||0===r.value.length?(o.setAttribute("disabled",!0),o.classList.remove("popup__button_active")):(o.removeAttribute("disabled",!0),o.classList.add("popup__button_active"))}},{key:"setEventListenersSignin",value:function(){var e=document.forms.signin,t=e.elements.signin__email,n=e.elements.signin__password,r=document.querySelector("#signin_button");0===t.value.length||0===n.value.length?(r.setAttribute("disabled",!0),r.classList.remove("popup__button_active")):(r.removeAttribute("disabled",!0),r.classList.add("popup__button_active"))}}])&&a(t.prototype,n),o&&a(t,o),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.api=n,this.createCardFunction=r}var t,n,o;return t=e,(n=[{key:"addCard",value:function(e,t,n,r,o,a,i){var c=this.createCardFunction(e,t,n,r,o,a,i);this.container.appendChild(c)}},{key:"renderResults",value:function(e){var t=this;this.container.classList.remove("results__container_more"),this.removeContainer(),this.removeNotFound(),this.renderLoader(),this.api.getNews(e).then((function(e){console.log(e),0===e.articles.length?(t.renderLoader(),t.addNotFound()):(e.articles.forEach((function(e){t.addCard(e.publishedAt,e.title,e.description,e.source.name,e.urlToImage,e.url,"")})),t.renderLoader(),t.addContainer())})).catch((function(e){t.renderLoader(),console.log(e)}))}},{key:"renderSaveResults",value:function(){var e=this;this.api.getArticle().then((function(t){t.data.forEach((function(t){e.addCard(t.date,t.title,t.text,t.source,t.image,t.link,t._id)}))})).catch((function(e){console.log(e)}))}},{key:"renderLoader",value:function(){document.querySelector(".preloader").classList.toggle("preloader_none")}},{key:"addNotFound",value:function(){document.querySelector(".not-found").classList.remove("not-found_none")}},{key:"removeNotFound",value:function(){document.querySelector(".not-found").classList.add("not-found_none")}},{key:"addContainer",value:function(){document.querySelector(".results").classList.remove("results_none")}},{key:"removeContainer",value:function(){document.querySelector(".results").classList.add("results_none")}},{key:"showMore",value:function(){this.container.classList.add("results__container_more")}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=function(){function e(t,n,r,a,i,c,s,u,l){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"removeCard",(function(e){e.stopPropagation(),d.removeEventListeners(d.cardElement),d.cardElement.remove()})),o(this,"removeEventListeners",(function(e){e.querySelector(".place-card__like-icon").removeEventListener("click",d.like),e.querySelector(".place-card__delete-icon").removeEventListener("click",d.removeCard)})),o(this,"cardAdd",(function(e){""!=localStorage.getItem("email")&&""!=localStorage.getItem("password")&&(e.target.classList.toggle("card__flag_blue"),d.api.createArticle(d.cardElement.querySelector(".card__text").textContent,d.cardElement.querySelector(".card__title").textContent,d.cardElement.querySelector(".card__text").textContent,d.cardElement.querySelector(".card__date").textContent,d.cardElement.querySelector(".card__source").textContent,d.cardElement.querySelector(".card__image").src,d.cardElement.querySelector(".card__image").src))})),o(this,"cardDelete",(function(){""!=localStorage.getItem("email")&&""!=localStorage.getItem("password")&&(d.api.removeArticle(d.cardElement.querySelector(".card__title").id),d.cardElement.querySelector(".card__flag").removeEventListener("click",d.cardAdd),d.cardElement.querySelector(".card__delete").removeEventListener("click",d.cardDelete),d.cardElement.querySelector(".card__image").removeEventListener("mouseover",d.cardOpacity),d.cardElement.querySelector(".card__image").removeEventListener("mouseout",d.cardOpacity),d.cardElement.remove())})),o(this,"cardOpacity",(function(){""!==localStorage.getItem("email")&&""!==localStorage.getItem("password")||d.cardElement.querySelector(".card__signin").classList.toggle("card__signin_visible")})),this.title=n,this.imageLink=i,this.text=r,this.date=t,this.source=a,this.cardUrl=c,this.cardId=s,this.template=u,this.api=l}var t,n,a;return t=e,(n=[{key:"renderIcon",value:function(){var e=this.template.cloneNode(!0).children[0],t=e.querySelector(".card__title"),n=e.querySelector(".card__image"),r=e.querySelector(".card__text"),o=e.querySelector(".card__date"),a=e.querySelector(".card__source");return t.textContent=this.title,r.textContent=this.text,o.textContent=this.date,a.textContent=this.source,n.src=this.imageLink,t.id=this.cardId,this.cardElement=e,this.addListeners(),this.cardElement}},{key:"addListeners",value:function(){this.cardElement.querySelector(".card__flag").addEventListener("click",this.cardAdd),this.cardElement.querySelector(".card__delete").addEventListener("click",this.cardDelete),this.cardElement.querySelector(".card__image").addEventListener("mouseover",this.cardOpacity),this.cardElement.querySelector(".card__image").addEventListener("mouseout",this.cardOpacity)}}])&&r(t.prototype,n),a&&r(t,a),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url}var t,n,o;return t=e,(n=[{key:"signup",value:function(e,t,n){return fetch("".concat(this.url,"/signup"),{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return e.json()})).catch((function(e){return e.message}))}},{key:"signin",value:function(e,t){return fetch("".concat(this.url,"/signin"),{credentials:"include",method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(n){return n.ok&&(localStorage.setItem("email",e),localStorage.setItem("password",t)),n.json()})).catch((function(e){return console.log(e)}))}},{key:"getUserData",value:function(){return fetch("".concat(this.url,"/users/me"),{credentials:"include",method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}},{key:"autoSignin",value:function(){var e=this;""!=localStorage.getItem("email")&&""!=localStorage.getItem("password")&&this.signin(localStorage.getItem("email"),localStorage.getItem("password")).then((function(t){localStorage.setItem("token",t.message),e.getUserData().then((function(t){e.changePage(t)}))})).catch((function(e){return console.log(e)}))}},{key:"changePage",value:function(e){var t=document.querySelector("#login"),n=document.querySelector("#logout"),r=document.querySelector("#save_page");localStorage.setItem("name",e.data.name),n.textContent="".concat(localStorage.getItem("name")," [->"),r.classList.toggle("header_none"),t.classList.toggle("header_none"),n.classList.toggle("header_none")}},{key:"createArticle",value:function(e,t,n,r,o,a,i){return fetch("".concat(this.url,"/articles"),{credentials:"include",method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({keyword:e,title:t,text:n,date:r,source:o,link:a,image:i})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}},{key:"getArticle",value:function(){return fetch("".concat(this.url,"/articles"),{credentials:"include",method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}},{key:"removeArticle",value:function(e){return fetch("".concat(this.url,"/articles/").concat(e),{credentials:"include",method:"DELETE",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){},function(e,t){var n=new Date;String(n.getDate()).padStart(2,"0"),String(n.getMonth()+1).padStart(2,"0"),n.getFullYear()},,function(e,t,n){"use strict";n.r(t);n(5);var r=n(0),o=n(1),a=n(2),i=n(3),c=n(4);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url,this.apiKey=t.apiKey,this.from=t.from,this.pageSize=t.pageSize}var t,n,r;return t=e,(n=[{key:"getNews",value:function(e){return fetch("".concat(this.url,"v2/everything?q=").concat(e,"&from=").concat(this.from,"&sortBy=publishedAt&apiKey=").concat(this.apiKey,"&pageSize=").concat(this.pageSize),{method:"GET",Authorization:{"Content-type":"application/json",apiKey:this.apiKey}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}}])&&s(t.prototype,n),r&&s(t,r),e}(),l=n(6),d=n.n(l),f=document.querySelector(".results__container"),m=document.querySelector(".results__button"),p=document.querySelector(".popup__close"),h=document.querySelector(".popup__form"),g=document.querySelector("#popup_signin"),v=document.querySelector("#popup_registration"),y=document.querySelector("#registration_link"),_=document.querySelector("#popup_success"),S=document.querySelector("#signin_link"),b=document.querySelector("#success_link"),E=document.querySelector(".search-field__text"),L=document.querySelector(".search-field__text_button"),k=document.querySelector("#login"),q=document.querySelector("#logout"),w=document.querySelector("#save_page"),C=document.querySelector(".template").content,j=document.forms.registration,I=j.elements.signup__name,A=j.elements.signup__email,x=j.elements.signup__password,O=document.forms.signin,P=O.elements.signin__email,T=O.elements.signin__password,D=new c.a({url:"https://api.gooseface.students.nomoreparties.space"}),z=new u({url:"https://nomoreparties.co/news/",apiKey:"d50fa49a7d074db38d0a434cf01763bb",from:d.a,pageSize:100}),N=new o.a(j),F=new o.a(O),M=new r.a(g,"popup_is-opened"),V=new r.a(v,"popup_is-opened"),B=new r.a(_,"popup_is-opened"),K=new a.a(f,z,(function(e,t,n,r,o,a,c){return new i.a(e,t,n,r,o,a,c,C,D).renderIcon()}));I.addEventListener("input",N.setEventListenersRegistration),A.addEventListener("input",N.setEventListenersRegistration),x.addEventListener("input",N.setEventListenersRegistration),N.setEventListeners(),P.addEventListener("input",F.setEventListenersSignin),T.addEventListener("input",F.setEventListenersSignin),y.addEventListener("click",(function(){M.close(),V.open()})),S.addEventListener("click",(function(){V.close(),M.open()})),b.addEventListener("click",(function(){B.close(),M.open()})),k.addEventListener("click",(function(){M.open()})),p.addEventListener("click",(function(){h.reset(),N.setSubmitButtonState(!1),F.setSubmitButtonState(!1)})),L.addEventListener("click",(function(){f.querySelectorAll("*").forEach((function(e){return e.remove()})),K.renderResults(E.value)})),j.addEventListener("submit",(function(e){e.preventDefault(),D.signup(A.value,x.value,I.value).then((function(e){return V.close(),B.open(),e})).catch((function(e){return console.log(e)}))})),O.addEventListener("submit",(function(e){e.preventDefault(),D.signin(P.value,T.value).then((function(e){localStorage.setItem("token",e.message),M.close(),D.getUserData().then((function(e){D.changePage(e)}))})).catch((function(e){return console.log(e)}))})),q.addEventListener("click",(function(){localStorage.setItem("email",""),localStorage.setItem("password",""),w.classList.toggle("header_none"),k.classList.toggle("header_none"),q.classList.toggle("header_none")})),m.addEventListener("click",(function(){K.showMore()})),D.autoSignin()}]);